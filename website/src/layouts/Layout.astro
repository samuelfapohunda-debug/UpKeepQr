---
import '@fontsource/poppins/400.css';
import '@fontsource/poppins/600.css';
import '@fontsource/poppins/700.css';
import '@fontsource/inter/400.css';
import '@fontsource/inter/500.css';
import '@fontsource/inter/600.css';
import Analytics from '../components/Analytics.astro';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  canonical?: string;
  noindex?: boolean;
  nofollow?: boolean;
}

const { 
  title, 
  description = "Professional QR code solutions for maintenance scheduling and customer engagement", 
  image = "https://www.upkeepqr.com/favicon.svg", 
  canonical, 
  noindex = false, 
  nofollow = false 
} = Astro.props;

const siteUrl = 'https://www.upkeepqr.com';
const fullImageUrl = image.startsWith('http') ? image : `${siteUrl}${image}`;
---

<!DOCTYPE html>
<html lang="en" class="motion-safe:scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.svg" />
    
    <!-- Generator -->
    <meta name="generator" content={Astro.generator} />
    
    <!-- Title -->
    <title>{title}</title>
    
    <!-- Canonical URL -->
    {canonical && <link rel="canonical" href={canonical} />}
    
    <!-- Robots meta -->
    {(noindex || nofollow) && (
      <meta 
        name="robots" 
        content={`${noindex ? 'noindex' : 'index'},${nofollow ? 'nofollow' : 'follow'}`} 
      />
    )}
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical || Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullImageUrl} />
    <meta property="og:site_name" content="UpkeepQR" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonical || Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={fullImageUrl} />
    
    <!-- Additional meta tags -->
    <meta name="theme-color" content="#1E2A38" />
    <meta name="format-detection" content="telephone=no" />
    
    <!-- AstroWind-style Global Styles -->
    <style>
      :root {
        --navy: #1E2A38;
        --bright-green: #A6E22E;
        --light-gray: #f8fafc;
        --text-gray: #64748b;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Inter', sans-serif;
        line-height: 1.6;
        color: var(--navy);
        background-color: white;
      }
      
      .font-poppins {
        font-family: 'Poppins', sans-serif;
      }
      
      /* Brand colors */
      .bg-navy { background-color: var(--navy); }
      .bg-bright-green { background-color: var(--bright-green); }
      .bg-light-gray { background-color: var(--light-gray); }
      .text-navy { color: var(--navy); }
      .text-bright-green { color: var(--bright-green); }
      .text-gray-600 { color: var(--text-gray); }
      .text-gray-300 { color: #d1d5db; }
      .text-white { color: white; }
      
      /* Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      
      /* Button styles */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 2rem;
        border-radius: 0.5rem;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        cursor: pointer;
      }
      
      .btn-primary {
        background-color: var(--bright-green);
        color: var(--navy);
      }
      
      .btn-primary:hover {
        background-color: #8BC34A;
        transform: translateY(-2px);
      }
      
      .btn-secondary {
        background-color: transparent;
        color: var(--navy);
        border: 2px solid var(--navy);
      }
      
      .btn-secondary:hover {
        background-color: var(--navy);
        color: white;
      }
      
      .btn-outline {
        color: var(--navy);
        border-color: var(--navy);
        background-color: transparent;
      }
      
      .btn-outline:hover {
        background-color: var(--navy);
        color: white;
      }
      
      .btn-outline-white {
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        background-color: transparent;
      }
      
      .btn-outline-white:hover {
        background-color: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.6);
      }
      
      /* Layout utilities */
      .py-20 { padding-top: 5rem; padding-bottom: 5rem; }
      .py-16 { padding-top: 4rem; padding-bottom: 4rem; }
      .mb-6 { margin-bottom: 1.5rem; }
      .mb-10 { margin-bottom: 2.5rem; }
      .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
      .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
      .max-w-4xl { max-width: 56rem; }
      .max-w-3xl { max-width: 48rem; }
      .mx-auto { margin-left: auto; margin-right: auto; }
      .text-center { text-align: center; }
      .gap-6 { gap: 1.5rem; }
      .justify-center { justify-content: center; }
      .items-center { align-items: center; }
      .flex { display: flex; }
      .flex-col { flex-direction: column; }
      .hidden { display: none; }
      .block { display: block; }
      
      /* Responsive utilities */
      @media (min-width: 640px) {
        .sm\:flex-row { flex-direction: row; }
        .sm\:block { display: block; }
      }
      
      @media (min-width: 768px) {
        .md\:text-6xl { font-size: 3.75rem; line-height: 1; }
        .md\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .md\:flex { display: flex; }
        .md\:hidden { display: none; }
      }
      
      /* AstroWind-style animations */
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes fadeUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
      .animate-fade-up { animation: fadeUp 0.5s ease-out; }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          --text-gray: #94a3b8;
        }
        
        .dark body {
          background-color: #0f172a;
          color: #e2e8f0;
        }
      }
    </style>
  </head>
  
  <body class="antialiased">
    <Analytics />
    <slot />
    
    <!-- Dark mode support script -->
    <script is:inline>
      // Simple dark mode detection and application
      if (typeof window !== 'undefined') {
        const theme = localStorage.getItem('theme');
        if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        }
      }
    </script>
  </body>
</html>