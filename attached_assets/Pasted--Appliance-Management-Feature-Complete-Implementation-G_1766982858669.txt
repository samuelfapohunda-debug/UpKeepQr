# Appliance Management Feature - Complete Implementation Guide

## Overview
This guide provides step-by-step instructions to implement a fully functional appliance management system in UpKeepQR. The feature allows admins to add, view, edit, and delete household appliances with warranty tracking.

---

## Part 1: Backend API Implementation

### Step 1: Create Appliance Routes File

**File:** `server/src/routes/appliances.ts`

```typescript
import { Router } from "express";
import { db } from "@db";
import { householdAppliances } from "@shared/schema";
import { eq, and } from "drizzle-orm";
import { v4 as uuidv4 } from "uuid";

const router = Router();

// GET /api/admin/households/:householdId/appliances
// Fetch all appliances for a household
router.get("/:householdId/appliances", async (req, res) => {
  try {
    const { householdId } = req.params;

    const appliances = await db
      .select()
      .from(householdAppliances)
      .where(eq(householdAppliances.householdId, householdId))
      .orderBy(householdAppliances.createdAt);

    res.json(appliances);
  } catch (error) {
    console.error("Error fetching appliances:", error);
    res.status(500).json({ error: "Failed to fetch appliances" });
  }
});

// POST /api/admin/households/:householdId/appliances
// Create a new appliance
router.post("/:householdId/appliances", async (req, res) => {
  try {
    const { householdId } = req.params;
    const {
      applianceType,
      brand,
      modelNumber,
      serialNumber,
      purchaseDate,
      installationDate,
      warrantyExpirationDate,
      purchasePrice,
      locationInHome,
      notes,
    } = req.body;

    // Validation
    if (!applianceType) {
      return res.status(400).json({ error: "Appliance type is required" });
    }

    const applianceId = uuidv4();

    const [newAppliance] = await db
      .insert(householdAppliances)
      .values({
        id: applianceId,
        householdId,
        applianceType,
        brand: brand || null,
        modelNumber: modelNumber || null,
        serialNumber: serialNumber || null,
        purchaseDate: purchaseDate ? new Date(purchaseDate) : null,
        installationDate: installationDate ? new Date(installationDate) : null,
        warrantyExpirationDate: warrantyExpirationDate
          ? new Date(warrantyExpirationDate)
          : null,
        purchasePrice: purchasePrice || null,
        locationInHome: locationInHome || null,
        notes: notes || null,
        createdAt: new Date(),
        updatedAt: new Date(),
      })
      .returning();

    res.status(201).json(newAppliance);
  } catch (error) {
    console.error("Error creating appliance:", error);
    res.status(500).json({ error: "Failed to create appliance" });
  }
});

// PUT /api/admin/households/:householdId/appliances/:applianceId
// Update an existing appliance
router.put("/:householdId/appliances/:applianceId", async (req, res) => {
  try {
    const { householdId, applianceId } = req.params;
    const {
      applianceType,
      brand,
      modelNumber,
      serialNumber,
      purchaseDate,
      installationDate,
      warrantyExpirationDate,
      purchasePrice,
      locationInHome,
      notes,
    } = req.body;

    const [updatedAppliance] = await db
      .update(householdAppliances)
      .set({
        applianceType,
        brand: brand || null,
        modelNumber: modelNumber || null,
        serialNumber: serialNumber || null,
        purchaseDate: purchaseDate ? new Date(purchaseDate) : null,
        installationDate: installationDate ? new Date(installationDate) : null,
        warrantyExpirationDate: warrantyExpirationDate
          ? new Date(warrantyExpirationDate)
          : null,
        purchasePrice: purchasePrice || null,
        locationInHome: locationInHome || null,
        notes: notes || null,
        updatedAt: new Date(),
      })
      .where(
        and(
          eq(householdAppliances.id, applianceId),
          eq(householdAppliances.householdId, householdId)
        )
      )
      .returning();

    if (!updatedAppliance) {
      return res.status(404).json({ error: "Appliance not found" });
    }

    res.json(updatedAppliance);
  } catch (error) {
    console.error("Error updating appliance:", error);
    res.status(500).json({ error: "Failed to update appliance" });
  }
});

// DELETE /api/admin/households/:householdId/appliances/:applianceId
// Delete an appliance
router.delete("/:householdId/appliances/:applianceId", async (req, res) => {
  try {
    const { householdId, applianceId } = req.params;

    const [deletedAppliance] = await db
      .delete(householdAppliances)
      .where(
        and(
          eq(householdAppliances.id, applianceId),
          eq(householdAppliances.householdId, householdId)
        )
      )
      .returning();

    if (!deletedAppliance) {
      return res.status(404).json({ error: "Appliance not found" });
    }

    res.json({ message: "Appliance deleted successfully" });
  } catch (error) {
    console.error("Error deleting appliance:", error);
    res.status(500).json({ error: "Failed to delete appliance" });
  }
});

export default router;
```

### Step 2: Register Routes in Main Server File

**File:** `server/index.ts`

Add the appliance routes to your Express app:

```typescript
// Add this import at the top
import appliancesRouter from "./src/routes/appliances";

// Add this route registration (after other admin routes)
app.use("/api/admin/households", appliancesRouter);
```

---

## Part 2: Frontend Component Implementation

### Step 3: Create Appliance Management Component

**File:** `client/src/components/HouseholdAppliancesView.tsx`

```typescript
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogFooter,
} from "@/components/ui/dialog";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { useToast } from "@/hooks/use-toast";
import { Pencil, Trash2, Plus, Calendar, DollarSign, MapPin } from "lucide-react";
import type { HouseholdAppliance } from "@shared/schema";

interface HouseholdAppliancesViewProps {
  householdId: string;
}

const APPLIANCE_TYPES = [
  "Refrigerator",
  "Dishwasher",
  "Washer",
  "Dryer",
  "Oven/Range",
  "Microwave",
  "Water Heater",
  "HVAC System",
  "Garbage Disposal",
  "Air Purifier",
  "Dehumidifier",
  "Sump Pump",
  "Water Softener",
  "Security System",
  "Smart Thermostat",
];

interface ApplianceFormData {
  applianceType: string;
  brand: string;
  modelNumber: string;
  serialNumber: string;
  purchaseDate: string;
  installationDate: string;
  warrantyExpirationDate: string;
  purchasePrice: string;
  locationInHome: string;
  notes: string;
}

const emptyFormData: ApplianceFormData = {
  applianceType: "",
  brand: "",
  modelNumber: "",
  serialNumber: "",
  purchaseDate: "",
  installationDate: "",
  warrantyExpirationDate: "",
  purchasePrice: "",
  locationInHome: "",
  notes: "",
};

export default function HouseholdAppliancesView({
  householdId,
}: HouseholdAppliancesViewProps) {
  const [appliances, setAppliances] = useState<HouseholdAppliance[]>([]);
  const [loading, setLoading] = useState(true);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingAppliance, setEditingAppliance] =
    useState<HouseholdAppliance | null>(null);
  const [formData, setFormData] = useState<ApplianceFormData>(emptyFormData);
  const [submitting, setSubmitting] = useState(false);
  const { toast } = useToast();

  // Fetch appliances
  useEffect(() => {
    fetchAppliances();
  }, [householdId]);

  const fetchAppliances = async () => {
    try {
      setLoading(true);
      const response = await fetch(
        `/api/admin/households/${householdId}/appliances`
      );
      if (!response.ok) throw new Error("Failed to fetch appliances");
      const data = await response.json();
      setAppliances(data);
    } catch (error) {
      console.error("Error fetching appliances:", error);
      toast({
        title: "Error",
        description: "Failed to load appliances",
        variant: "destructive",
      });
    } finally {
      setLoading(false);
    }
  };

  // Open dialog for adding new appliance
  const handleAddAppliance = () => {
    setEditingAppliance(null);
    setFormData(emptyFormData);
    setIsDialogOpen(true);
  };

  // Open dialog for editing existing appliance
  const handleEditAppliance = (appliance: HouseholdAppliance) => {
    setEditingAppliance(appliance);
    setFormData({
      applianceType: appliance.applianceType || "",
      brand: appliance.brand || "",
      modelNumber: appliance.modelNumber || "",
      serialNumber: appliance.serialNumber || "",
      purchaseDate: appliance.purchaseDate
        ? new Date(appliance.purchaseDate).toISOString().split("T")[0]
        : "",
      installationDate: appliance.installationDate
        ? new Date(appliance.installationDate).toISOString().split("T")[0]
        : "",
      warrantyExpirationDate: appliance.warrantyExpirationDate
        ? new Date(appliance.warrantyExpirationDate).toISOString().split("T")[0]
        : "",
      purchasePrice: appliance.purchasePrice || "",
      locationInHome: appliance.locationInHome || "",
      notes: appliance.notes || "",
    });
    setIsDialogOpen(true);
  };

  // Submit form (create or update)
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!formData.applianceType) {
      toast({
        title: "Validation Error",
        description: "Appliance type is required",
        variant: "destructive",
      });
      return;
    }

    setSubmitting(true);

    try {
      const url = editingAppliance
        ? `/api/admin/households/${householdId}/appliances/${editingAppliance.id}`
        : `/api/admin/households/${householdId}/appliances`;

      const method = editingAppliance ? "PUT" : "POST";

      const response = await fetch(url, {
        method,
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
      });

      if (!response.ok) throw new Error("Failed to save appliance");

      toast({
        title: "Success",
        description: `Appliance ${editingAppliance ? "updated" : "added"} successfully`,
      });

      setIsDialogOpen(false);
      fetchAppliances();
    } catch (error) {
      console.error("Error saving appliance:", error);
      toast({
        title: "Error",
        description: "Failed to save appliance",
        variant: "destructive",
      });
    } finally {
      setSubmitting(false);
    }
  };

  // Delete appliance
  const handleDeleteAppliance = async (applianceId: string) => {
    if (!confirm("Are you sure you want to delete this appliance?")) return;

    try {
      const response = await fetch(
        `/api/admin/households/${householdId}/appliances/${applianceId}`,
        { method: "DELETE" }
      );

      if (!response.ok) throw new Error("Failed to delete appliance");

      toast({
        title: "Success",
        description: "Appliance deleted successfully",
      });

      fetchAppliances();
    } catch (error) {
      console.error("Error deleting appliance:", error);
      toast({
        title: "Error",
        description: "Failed to delete appliance",
        variant: "destructive",
      });
    }
  };

  // Calculate warranty status
  const getWarrantyStatus = (warrantyExpirationDate: Date | null) => {
    if (!warrantyExpirationDate) return null;

    const now = new Date();
    const expiration = new Date(warrantyExpirationDate);
    const daysUntilExpiration = Math.ceil(
      (expiration.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)
    );

    if (daysUntilExpiration < 0) {
      return { label: "Expired", variant: "destructive" as const };
    } else if (daysUntilExpiration <= 30) {
      return { label: "Expiring Soon", variant: "warning" as const };
    } else {
      return { label: "Active", variant: "default" as const };
    }
  };

  if (loading) {
    return <div className="p-6">Loading appliances...</div>;
  }

  return (
    <div className="p-6 space-y-4">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h3 className="text-lg font-semibold">Household Appliances</h3>
          <p className="text-sm text-muted-foreground">
            Manage appliances and track warranties
          </p>
        </div>
        <Button onClick={handleAddAppliance}>
          <Plus className="mr-2 h-4 w-4" />
          Add Appliance
        </Button>
      </div>

      {/* Appliances List */}
      {appliances.length === 0 ? (
        <Card>
          <CardContent className="flex flex-col items-center justify-center py-12">
            <p className="text-muted-foreground mb-4">No appliances added yet</p>
            <Button onClick={handleAddAppliance}>
              <Plus className="mr-2 h-4 w-4" />
              Add First Appliance
            </Button>
          </CardContent>
        </Card>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {appliances.map((appliance) => {
            const warrantyStatus = getWarrantyStatus(
              appliance.warrantyExpirationDate
            );

            return (
              <Card key={appliance.id}>
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div>
                      <CardTitle className="text-base">
                        {appliance.applianceType}
                      </CardTitle>
                      {appliance.brand && (
                        <CardDescription>
                          {appliance.brand}
                          {appliance.modelNumber && ` - ${appliance.modelNumber}`}
                        </CardDescription>
                      )}
                    </div>
                    {warrantyStatus && (
                      <Badge variant={warrantyStatus.variant}>
                        {warrantyStatus.label}
                      </Badge>
                    )}
                  </div>
                </CardHeader>
                <CardContent className="space-y-2">
                  {appliance.locationInHome && (
                    <div className="flex items-center text-sm text-muted-foreground">
                      <MapPin className="mr-2 h-4 w-4" />
                      {appliance.locationInHome}
                    </div>
                  )}
                  {appliance.purchasePrice && (
                    <div className="flex items-center text-sm text-muted-foreground">
                      <DollarSign className="mr-2 h-4 w-4" />
                      ${appliance.purchasePrice}
                    </div>
                  )}
                  {appliance.warrantyExpirationDate && (
                    <div className="flex items-center text-sm text-muted-foreground">
                      <Calendar className="mr-2 h-4 w-4" />
                      Warranty:{" "}
                      {new Date(
                        appliance.warrantyExpirationDate
                      ).toLocaleDateString()}
                    </div>
                  )}

                  <div className="flex gap-2 pt-4">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => handleEditAppliance(appliance)}
                      className="flex-1"
                    >
                      <Pencil className="mr-2 h-4 w-4" />
                      Edit
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => handleDeleteAppliance(appliance.id)}
                      className="text-destructive hover:text-destructive"
                    >
                      <Trash2 className="h-4 w-4" />
                    </Button>
                  </div>
                </CardContent>
              </Card>
            );
          })}
        </div>
      )}

      {/* Add/Edit Dialog */}
      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
        <DialogContent className="max-w-2xl max-h-[90vh] overflow-y-auto">
          <DialogHeader>
            <DialogTitle>
              {editingAppliance ? "Edit Appliance" : "Add New Appliance"}
            </DialogTitle>
          </DialogHeader>

          <form onSubmit={handleSubmit} className="space-y-4">
            {/* Appliance Type */}
            <div className="space-y-2">
              <Label htmlFor="applianceType">
                Appliance Type <span className="text-destructive">*</span>
              </Label>
              <Select
                value={formData.applianceType}
                onValueChange={(value) =>
                  setFormData({ ...formData, applianceType: value })
                }
              >
                <SelectTrigger>
                  <SelectValue placeholder="Select appliance type" />
                </SelectTrigger>
                <SelectContent>
                  {APPLIANCE_TYPES.map((type) => (
                    <SelectItem key={type} value={type}>
                      {type}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>

            {/* Brand & Model */}
            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="brand">Brand</Label>
                <Input
                  id="brand"
                  value={formData.brand}
                  onChange={(e) =>
                    setFormData({ ...formData, brand: e.target.value })
                  }
                  placeholder="e.g., Samsung, LG, Whirlpool"
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="modelNumber">Model Number</Label>
                <Input
                  id="modelNumber"
                  value={formData.modelNumber}
                  onChange={(e) =>
                    setFormData({ ...formData, modelNumber: e.target.value })
                  }
                  placeholder="e.g., RF28R7351SR"
                />
              </div>
            </div>

            {/* Serial Number & Location */}
            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="serialNumber">Serial Number</Label>
                <Input
                  id="serialNumber"
                  value={formData.serialNumber}
                  onChange={(e) =>
                    setFormData({ ...formData, serialNumber: e.target.value })
                  }
                  placeholder="e.g., 123456789"
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="locationInHome">Location in Home</Label>
                <Input
                  id="locationInHome"
                  value={formData.locationInHome}
                  onChange={(e) =>
                    setFormData({ ...formData, locationInHome: e.target.value })
                  }
                  placeholder="e.g., Kitchen, Basement"
                />
              </div>
            </div>

            {/* Dates */}
            <div className="grid grid-cols-3 gap-4">
              <div className="space-y-2">
                <Label htmlFor="purchaseDate">Purchase Date</Label>
                <Input
                  id="purchaseDate"
                  type="date"
                  value={formData.purchaseDate}
                  onChange={(e) =>
                    setFormData({ ...formData, purchaseDate: e.target.value })
                  }
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="installationDate">Installation Date</Label>
                <Input
                  id="installationDate"
                  type="date"
                  value={formData.installationDate}
                  onChange={(e) =>
                    setFormData({
                      ...formData,
                      installationDate: e.target.value,
                    })
                  }
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="warrantyExpirationDate">
                  Warranty Expiration
                </Label>
                <Input
                  id="warrantyExpirationDate"
                  type="date"
                  value={formData.warrantyExpirationDate}
                  onChange={(e) =>
                    setFormData({
                      ...formData,
                      warrantyExpirationDate: e.target.value,
                    })
                  }
                />
              </div>
            </div>

            {/* Purchase Price */}
            <div className="space-y-2">
              <Label htmlFor="purchasePrice">Purchase Price ($)</Label>
              <Input
                id="purchasePrice"
                type="number"
                step="0.01"
                value={formData.purchasePrice}
                onChange={(e) =>
                  setFormData({ ...formData, purchasePrice: e.target.value })
                }
                placeholder="e.g., 1299.99"
              />
            </div>

            {/* Notes */}
            <div className="space-y-2">
              <Label htmlFor="notes">Notes</Label>
              <Textarea
                id="notes"
                value={formData.notes}
                onChange={(e) =>
                  setFormData({ ...formData, notes: e.target.value })
                }
                placeholder="Additional details, maintenance history, etc."
                rows={3}
              />
            </div>

            <DialogFooter>
              <Button
                type="button"
                variant="outline"
                onClick={() => setIsDialogOpen(false)}
                disabled={submitting}
              >
                Cancel
              </Button>
              <Button type="submit" disabled={submitting}>
                {submitting
                  ? "Saving..."
                  : editingAppliance
                  ? "Update Appliance"
                  : "Add Appliance"}
              </Button>
            </DialogFooter>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
}
```

### Step 4: Update SetupFormsDashboard to Use New Component

**File:** `client/src/pages/SetupFormsDashboard.tsx`

Find the section where you have the 4-tab modal and replace the "Appliances" tab content:

```typescript
import HouseholdAppliancesView from "@/components/HouseholdAppliancesView";

// Inside your modal tabs:
<TabsContent value="appliances" className="mt-0">
  {selectedHousehold && (
    <HouseholdAppliancesView householdId={selectedHousehold.id} />
  )}
</TabsContent>
```

---

## Part 3: Testing Instructions

### Step 5: Test the Feature

1. **Start the development server:**
   ```bash
   npm run dev
   ```

2. **Navigate to Admin Dashboard:**
   - Go to `https://upkeepqr.com/admin/setup-forms`
   - Click on any household to open the modal
   - Click the "Appliances" tab

3. **Test Add Appliance:**
   - Click "+ Add Appliance" button
   - Fill in the form:
     - **Required:** Appliance Type (select from dropdown)
     - **Optional:** Brand, Model, Serial, Dates, Price, Location, Notes
   - Click "Add Appliance"
   - Verify the appliance appears in the grid

4. **Test Edit Appliance:**
   - Click the "Edit" button on an appliance card
   - Modify some fields
   - Click "Update Appliance"
   - Verify changes are reflected

5. **Test Delete Appliance:**
   - Click the trash icon on an appliance card
   - Confirm deletion
   - Verify appliance is removed

6. **Test Warranty Status Badges:**
   - Add appliances with different warranty expiration dates:
     - Past date → "Expired" (red badge)
     - Within 30 days → "Expiring Soon" (yellow badge)
     - Future date → "Active" (default badge)

7. **Test Empty State:**
   - Delete all appliances from a household
   - Verify "No appliances added yet" message appears
   - Click "+ Add First Appliance" button

---

## Part 4: Database Verification

### Step 6: Verify Database Schema

The `household_appliances` table should already exist in your production database with these columns:

```sql
CREATE TABLE household_appliances (
  id VARCHAR(255) PRIMARY KEY,
  household_id VARCHAR(255) NOT NULL REFERENCES households(id),
  appliance_type VARCHAR(100),
  brand VARCHAR(100),
  model_number VARCHAR(100),
  serial_number VARCHAR(100),
  purchase_date DATE,
  installation_date DATE,
  warranty_expiration_date DATE,
  estimated_lifespan_years INTEGER,
  purchase_price VARCHAR(50),
  energy_rating VARCHAR(20),
  location_in_home VARCHAR(100),
  notes TEXT,
  last_service_date DATE,
  next_service_due DATE,
  service_provider VARCHAR(255),
  manual_url VARCHAR(500),
  is_under_warranty BOOLEAN,
  warranty_provider VARCHAR(255),
  warranty_terms TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

Run this query to verify:
```sql
SELECT * FROM household_appliances LIMIT 5;
```

---

## Part 5: Environment Setup

### Step 7: Ensure Required Dependencies

Make sure these packages are installed:

```json
{
  "dependencies": {
    "uuid": "^10.0.0"
  },
  "devDependencies": {
    "@types/uuid": "^10.0.0"
  }
}
```

If missing, install:
```bash
npm install uuid
npm install -D @types/uuid
```

---

## Part 6: Deployment

### Step 8: Deploy to Production

1. **Commit changes:**
   ```bash
   git add .
   git commit -m "Add appliance management feature with CRUD operations"
   git push origin main
   ```

2. **Render will auto-deploy** (usually takes 2-3 minutes)

3. **Monitor deployment:**
   - Go to https://dashboard.render.com
   - Check build logs for errors

4. **Test in production:**
   - Visit https://upkeepqr.com/admin/setup-forms
   - Add/edit/delete appliances
   - Verify all operations work

---

## Part 7: Additional Enhancements (Optional)

### Enhancement 1: Add Appliance Icons

Update the appliance card to show icons based on type:

```typescript
import { 
  Refrigerator, 
  WashingMachine, 
  Microwave, 
  Wind,
  Droplets 
} from "lucide-react";

const APPLIANCE_ICONS: Record<string, React.ReactNode> = {
  "Refrigerator": <Refrigerator className="h-5 w-5" />,
  "Washer": <WashingMachine className="h-5 w-5" />,
  "Dryer": <Wind className="h-5 w-5" />,
  "Water Heater": <Droplets className="h-5 w-5" />,
  // Add more as needed
};
```

### Enhancement 2: Add Service History

Link appliances to maintenance logs:

```typescript
// Add to HouseholdAppliancesView.tsx
const [serviceLogs, setServiceLogs] = useState([]);

const fetchServiceLogs = async (applianceId: string) => {
  const response = await fetch(
    `/api/admin/appliances/${applianceId}/service-logs`
  );
  const logs = await response.json();
  setServiceLogs(logs);
};
```

### Enhancement 3: Export Appliance List

Add export functionality:

```typescript
const exportToCSV = () => {
  const csv = appliances.map(a => ({
    Type: a.applianceType,
    Brand: a.brand,
    Model: a.modelNumber,
    Serial: a.serialNumber,
    Warranty: a.warrantyExpirationDate,
    Price: a.purchasePrice,
  }));
  
  // Convert to CSV and download
};
```

---

## Troubleshooting

### Issue: "Failed to fetch appliances"
**Solution:** Check that the API route is registered in `server/index.ts`

### Issue: Form not submitting
**Solution:** Verify CORS settings and check browser console for errors

### Issue: Warranty status not showing
**Solution:** Ensure `warrantyExpirationDate` is being saved as a proper Date object

### Issue: TypeScript errors
**Solution:** Run `npm run build` to see specific errors, likely missing type definitions

---

## Success Criteria

✅ Admin can add new appliances via form  
✅ Appliances display in card grid  
✅ Edit functionality works  
✅ Delete functionality works with confirmation  
✅ Warranty status badges show correctly  
✅ Empty state displays when no appliances  
✅ All data persists to database  
✅ UI updates in real-time after changes  

---

## Files Modified/Created

**Created:**
- `server/src/routes/appliances.ts`
- `client/src/components/HouseholdAppliancesView.tsx`

**Modified:**
- `server/index.ts` (register routes)
- `client/src/pages/SetupFormsDashboard.tsx` (use new component)

---

## Next Steps After Implementation

1. Test warranty expiration alerts (existing cron job should work)
2. Add service history tracking
3. Link appliances to maintenance tasks
4. Add photo upload for appliances
5. Generate maintenance schedules based on appliance lifespan

---

**Implementation Time Estimate:** 2-3 hours  
**Complexity:** Medium  
**Priority:** High (core feature for household management)