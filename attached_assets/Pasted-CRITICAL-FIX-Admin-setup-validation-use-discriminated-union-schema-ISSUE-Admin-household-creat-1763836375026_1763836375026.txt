CRITICAL FIX: Admin setup validation - use discriminated union schema.

ISSUE:
Admin household creation fails with token validation error.
Previous fix was incomplete - it removed validation entirely.

ROOT CAUSE:
Zod's .optional() with .min() constraints still validates undefined values.
Need separate validation logic for admin vs customer modes.

SOLUTION: Use discriminated union schema to handle both modes correctly.

FILE 1: shared/schema.ts

COMPLETELY REPLACE the setupActivateSchema with this:
```typescript
// Discriminated union schema for setup activation
export const setupActivateSchema = z.discriminatedUnion('adminCreated', [
  // Customer QR flow
  z.object({
    adminCreated: z.literal(false).optional().default(false),
    token: z.string().min(1), // Required for customers
    fullName: z.string().min(2),
    email: z.string().email(),
    phone: z.string().min(10),
    streetAddress: z.string().min(1),
    city: z.string().min(1),
    state: z.string().length(2),
    postalCode: z.string().length(5),
    preferredContact: z.enum(['email', 'phone', 'text']).optional(),
    preferredContactTime: z.string().optional(),
    homeType: z.string().optional(),
    sqft: z.number().optional(),
    hvacType: z.string().optional(),
    waterHeaterType: z.string().optional(),
    roofAgeYears: z.number().optional(),
    isOwner: z.boolean().optional(),
    yearBuilt: z.number().optional(),
    interestType: z.string().optional(),
    needConsultation: z.boolean().optional(),
    budgetRange: z.string().optional(),
    timeline: z.string().optional(),
    notes: z.string().optional(),
    smsOptIn: z.boolean().optional().default(false),
    skipWelcomeEmail: z.boolean().optional().default(false),
  }),
  // Admin manual creation flow
  z.object({
    adminCreated: z.literal(true), // Must be true for admin
    // NO token field for admin
    fullName: z.string().min(2),
    email: z.string().email(),
    phone: z.string().min(10),
    streetAddress: z.string().min(1),
    city: z.string().min(1),
    state: z.string().length(2),
    postalCode: z.string().length(5),
    preferredContact: z.enum(['email', 'phone', 'text']).optional(),
    preferredContactTime: z.string().optional(),
    homeType: z.string().optional(),
    sqft: z.number().optional(),
    hvacType: z.string().optional(),
    waterHeaterType: z.string().optional(),
    roofAgeYears: z.number().optional(),
    isOwner: z.boolean().optional(),
    yearBuilt: z.number().optional(),
    interestType: z.string().optional(),
    needConsultation: z.boolean().optional(),
    budgetRange: z.string().optional(),
    timeline: z.string().optional(),
    notes: z.string().optional(),
    smsOptIn: z.boolean().optional().default(false),
    skipWelcomeEmail: z.boolean().optional().default(true),
  })
]);
```

FILE 2: server/routes.ts

Update the POST /api/setup/activate endpoint validation section:

FIND this section (around line 50-100 in the endpoint):
```typescript
const validatedData = setupActivateSchema.parse(req.body);
const { token, adminCreated = false, ... } = validatedData;

// ... token validation logic
```

REPLACE WITH this enhanced version:
```typescript
const validatedData = setupActivateSchema.parse(req.body);
const { 
  token, 
  adminCreated = false,
  skipWelcomeEmail = false,
  ...householdData 
} = validatedData;

console.log('Setup activation:', { adminCreated, hasToken: !!token });

// Validate authentication for admin mode
const requester = await getUserFromAuth(req);
const isAdminMode = requester?.role === 'admin' && adminCreated === true;

// Security: Block unauthorized admin mode
if (adminCreated && !isAdminMode) {
  console.warn('Unauthorized admin mode attempt');
  return res.status(403).json({ 
    error: "Admin authorization required" 
  });
}

// Mode-specific token validation
let orderItem = null;

if (isAdminMode) {
  console.log('Admin mode: Skipping token validation');
} else {
  // Customer mode: Token required
  if (!token || token.trim() === '') {
    return res.status(400).json({ 
      error: "Activation token required" 
    });
  }

  orderItem = await storage.getOrderItemByActivationCode(token);
  
  if (!orderItem) {
    return res.status(404).json({ error: "Invalid token" });
  }

  if (orderItem.item.activationStatus === 'activated') {
    return res.status(409).json({ 
      error: "QR code already activated",
      alreadyActivated: true
    });
  }
}
```

TESTING STEPS:
1. Login as admin
2. Go to /setup/new
3. Fill ALL required fields (Name, Phone, Email, Address, City, State, ZIP)
4. Click "Create Household"
5. Should succeed without token error
6. Check console: "Admin mode: Skipping token validation"
7. Check database: household created with createdBy='admin'
8. Verify no welcome email sent

9. Test customer QR:
10. Scan QR code with token
11. Should still work with token validation
12. Check welcome email sent

EXPECTED LOGS:
Admin: "‚úÖ Admin mode: Skipping token validation"
Customer: "üîç Customer mode: Validating token"

This discriminated union ensures:
‚úÖ Customer flow REQUIRES token
‚úÖ Admin flow DOES NOT accept token
‚úÖ Proper validation for each mode
‚úÖ No confusion between modes