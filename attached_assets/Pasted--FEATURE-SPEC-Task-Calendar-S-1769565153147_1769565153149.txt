â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ¯ FEATURE SPEC: Task Calendar Sync for Homeowners         â•‘
â•‘  Home Maintenance Task Calendar Integration                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FEATURE: Homeowner Task Calendar Sync
PURPOSE: Allow homeowners to sync their maintenance tasks to personal calendar
LOCATION: /admin/setup-forms - Household Details Modal - Tasks Tab
CURRENT STATUS: Button exists but functionality not working (500 error)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ FEATURE OVERVIEW

Purpose:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Enable homeowners to add their home maintenance tasks to their 
personal calendar (Google Calendar, Outlook, Apple Calendar) so 
they receive reminders and can track tasks alongside other events.

User Story:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
As a homeowner using UpKeepQR,
I want to sync my maintenance tasks to my calendar,
So that I receive reminders and don't forget important home maintenance.

Current Task View:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Household: "My Tester"
Total Tasks: 4
- Pending: 3
- Overdue: 0  
- Completed: 1

Tasks:
1. Test smoke alarms (High, Safety) - Due: Feb 23, 2026 - Pending
2. Test carbon monoxide detectors (High, Safety) - Due: Feb 23, 2026 - Pending
3. Test garage door auto-reverse (High, Safety) - Due: Feb 23, 2026 - Pending
4. Replace smoke/CO alarm batteries (High, Safety) - Due: Feb 23, 2026 - Completed âœ“

Expected Behavior:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
When homeowner clicks "Sync Calendar":
1. Create calendar events for all pending tasks
2. Each task becomes a calendar event with:
   - Title: Task name (e.g., "Test smoke alarms")
   - Date: Task due date
   - Description: Task instructions
   - Priority: High/Medium/Low
   - Category: Safety/Maintenance/etc.
3. Send calendar invitation via email
4. Calendar events include reminder notifications
5. Homeowner can accept/add to their calendar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ HOW IT SHOULD WORK

Two Implementation Approaches:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Approach A: .ics File Download (Recommended - Simpler)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Flow:
1. User clicks "Sync Calendar" button
2. System generates .ics file with all tasks
3. Browser downloads .ics file
4. User opens .ics file
5. Tasks automatically import to their default calendar app
6. Works with all calendar apps (Google, Outlook, Apple, etc.)

Advantages:
âœ… No OAuth setup required
âœ… Works with any calendar app
âœ… Simple implementation
âœ… No API credentials needed
âœ… User has full control
âœ… Privacy-friendly (no account connection)

Technical Implementation:
```typescript
// Generate .ics file content
const generateICS = (tasks) => {
  const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//UpKeepQR//Home Maintenance//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:UpKeepQR Maintenance Tasks
X-WR-TIMEZONE:America/New_York
BEGIN:VTIMEZONE
TZID:America/New_York
END:VTIMEZONE
${tasks.map(task => createTaskEvent(task)).join('\n')}
END:VCALENDAR`;

  return icsContent;
};

// Create individual task event
const createTaskEvent = (task) => {
  const dueDate = formatDate(task.dueDate); // YYYYMMDD format
  const uid = `task-${task.id}@upkeepqr.com`;
  
  return `BEGIN:VEVENT
UID:${uid}
DTSTAMP:${formatDateTime(new Date())}
DTSTART;VALUE=DATE:${dueDate}
SUMMARY:${escapeICS(task.title)}
DESCRIPTION:${escapeICS(task.description)}\\n\\nPriority: ${task.priority}\\n\\nCategory: ${task.category}
PRIORITY:${getPriorityNumber(task.priority)}
CATEGORIES:${task.category}
STATUS:${task.status === 'completed' ? 'COMPLETED' : 'NEEDS-ACTION'}
BEGIN:VALARM
TRIGGER:-P1D
DESCRIPTION:Reminder: ${escapeICS(task.title)}
ACTION:DISPLAY
END:VALARM
END:VEVENT`;
};

// Download .ics file
const downloadICS = (icsContent, filename) => {
  const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(link.href);
};
```

User Experience:
```
1. Click "Sync Calendar"
2. File "UpKeepQR_Tasks_My_Tester.ics" downloads
3. Open file (double-click)
4. Calendar app opens with import dialog
5. User clicks "Import" or "Add to Calendar"
6. All tasks now in their calendar âœ“
```

Approach B: Direct Calendar API Integration (Complex)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Flow:
1. User clicks "Connect Calendar" (first time only)
2. OAuth flow to connect Google/Outlook
3. User authorizes UpKeepQR
4. Tokens saved to database
5. User clicks "Sync Calendar"
6. Tasks directly added to user's calendar via API

Advantages:
âœ… Automatic sync (no file download)
âœ… Can update existing events
âœ… Bi-directional sync possible

Disadvantages:
âŒ Complex OAuth setup
âŒ Requires API credentials
âŒ Only works with supported providers
âŒ Security/privacy concerns
âŒ Token management needed
âŒ More maintenance

Recommendation: Use Approach A (.ics file) for simplicity

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’» IMPLEMENTATION - APPROACH A (.ics FILE)

Complete Implementation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Step 1: Server Endpoint - Generate .ics Content
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

File: server/routes/calendar.ts

```typescript
import { Router } from 'express';
import { Request, Response } from 'express';

const router = Router();

// Generate .ics calendar file for household tasks
router.get('/household/:householdId/tasks.ics', async (req: Request, res: Response) => {
  try {
    const { householdId } = req.params;
    const userId = req.user?.id;

    if (!userId) {
      return res.status(401).json({ error: 'Not authenticated' });
    }

    // Verify user owns this household
    const household = await db.query(
      'SELECT * FROM households WHERE id = ? AND user_id = ?',
      [householdId, userId]
    );

    if (!household) {
      return res.status(403).json({ error: 'Access denied' });
    }

    // Get all pending tasks for this household
    const tasks = await db.query(
      `SELECT 
        id, 
        title, 
        description, 
        due_date, 
        priority, 
        category, 
        status 
      FROM tasks 
      WHERE household_id = ? 
      AND status != 'completed'
      ORDER BY due_date ASC`,
      [householdId]
    );

    // Generate .ics content
    const icsContent = generateICSFile(tasks, household.name);

    // Set headers for .ics file download
    res.setHeader('Content-Type', 'text/calendar; charset=utf-8');
    res.setHeader('Content-Disposition', `attachment; filename="UpKeepQR_Tasks_${household.name.replace(/\s+/g, '_')}.ics"`);
    
    return res.send(icsContent);

  } catch (error) {
    console.error('Calendar generation error:', error);
    return res.status(500).json({ 
      error: 'Failed to generate calendar file',
      details: error.message 
    });
  }
});

// Helper function to generate .ics file content
function generateICSFile(tasks: any[], householdName: string): string {
  const now = new Date();
  const timestamp = formatICSDateTime(now);
  
  // Start of .ics file
  let ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//UpKeepQR//Home Maintenance Tasks//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:UpKeepQR - ${escapeICS(householdName)}
X-WR-TIMEZONE:America/New_York
X-WR-CALDESC:Home maintenance tasks for ${escapeICS(householdName)}
BEGIN:VTIMEZONE
TZID:America/New_York
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
TZNAME:EDT
DTSTART:19700308T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
END:VTIMEZONE\n`;

  // Add each task as an event
  tasks.forEach(task => {
    const uid = `task-${task.id}@upkeepqr.com`;
    const dueDate = formatICSDate(new Date(task.due_date));
    const created = timestamp;
    
    // Priority mapping: High=1, Medium=5, Low=9
    const priority = task.priority === 'High' ? '1' : 
                     task.priority === 'Medium' ? '5' : '9';
    
    ics += `BEGIN:VEVENT
UID:${uid}
DTSTAMP:${created}
DTSTART;VALUE=DATE:${dueDate}
DTEND;VALUE=DATE:${dueDate}
SUMMARY:${escapeICS(task.title)}
DESCRIPTION:${escapeICS(task.description)}\\n\\nPriority: ${task.priority}\\n\\nCategory: ${task.category}\\n\\nFrom UpKeepQR
PRIORITY:${priority}
CATEGORIES:${escapeICS(task.category)},Home Maintenance
STATUS:NEEDS-ACTION
CLASS:PUBLIC
TRANSP:TRANSPARENT
LOCATION:${escapeICS(householdName)}
BEGIN:VALARM
TRIGGER:-P1D
DESCRIPTION:Reminder: ${escapeICS(task.title)} is due tomorrow
ACTION:DISPLAY
END:VALARM
BEGIN:VALARM
TRIGGER:-P7D
DESCRIPTION:Reminder: ${escapeICS(task.title)} is due in 1 week
ACTION:DISPLAY
END:VALARM
END:VEVENT\n`;
  });

  // End of .ics file
  ics += `END:VCALENDAR`;

  return ics;
}

// Format date as YYYYMMDD for .ics
function formatICSDate(date: Date): string {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  return `${year}${month}${day}`;
}

// Format datetime as YYYYMMDDTHHmmssZ for .ics
function formatICSDateTime(date: Date): string {
  const year = date.getUTCFullYear();
  const month = String(date.getUTCMonth() + 1).padStart(2, '0');
  const day = String(date.getUTCDate()).padStart(2, '0');
  const hours = String(date.getUTCHours()).padStart(2, '0');
  const minutes = String(date.getUTCMinutes()).padStart(2, '0');
  const seconds = String(date.getUTCSeconds()).padStart(2, '0');
  return `${year}${month}${day}T${hours}${minutes}${seconds}Z`;
}

// Escape special characters for .ics format
function escapeICS(text: string): string {
  if (!text) return '';
  return text
    .replace(/\\/g, '\\\\')  // Backslash
    .replace(/;/g, '\\;')    // Semicolon
    .replace(/,/g, '\\,')    // Comma
    .replace(/\n/g, '\\n')   // Newline
    .replace(/\r/g, '');     // Remove carriage return
}

export default router;
```

Step 2: Frontend - Sync Calendar Button
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

File: client/src/components/HouseholdDetailsModal.tsx

```tsx
import { useState } from 'react';

const HouseholdDetailsModal = ({ household }) => {
  const [isSyncing, setIsSyncing] = useState(false);
  const [syncSuccess, setSyncSuccess] = useState(false);

  const handleSyncCalendar = async () => {
    try {
      setIsSyncing(true);
      setSyncSuccess(false);

      // Download .ics file
      const response = await fetch(
        `/api/calendar/household/${household.id}/tasks.ics`,
        {
          method: 'GET',
          credentials: 'include'
        }
      );

      if (!response.ok) {
        throw new Error('Failed to generate calendar file');
      }

      // Get the .ics file content
      const blob = await response.blob();
      
      // Create download link
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `UpKeepQR_Tasks_${household.name.replace(/\s+/g, '_')}.ics`;
      
      // Trigger download
      document.body.appendChild(link);
      link.click();
      
      // Cleanup
      document.body.removeChild(link);
      window.URL.revokeObjectURL(url);

      // Show success message
      setSyncSuccess(true);
      setTimeout(() => setSyncSuccess(false), 5000);

    } catch (error) {
      console.error('Calendar sync error:', error);
      alert('Failed to sync calendar. Please try again.');
    } finally {
      setIsSyncing(false);
    }
  };

  return (
    <div className="modal">
      {/* ... other modal content ... */}
      
      <div className="tasks-tab">
        <div className="tasks-header">
          <h3>Tasks for {household.name}</h3>
          
          <button
            onClick={handleSyncCalendar}
            disabled={isSyncing}
            className="sync-calendar-btn"
          >
            {isSyncing ? (
              <>
                <SpinnerIcon className="animate-spin" />
                Generating...
              </>
            ) : (
              <>
                <CalendarIcon />
                Sync Calendar
              </>
            )}
          </button>
        </div>

        {syncSuccess && (
          <div className="success-message">
            âœ“ Calendar file downloaded! Open it to add tasks to your calendar.
          </div>
        )}

        {/* ... task list ... */}
      </div>
    </div>
  );
};
```

Step 3: Register Route in Server
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

File: server/index.ts

```typescript
import calendarRoutes from './routes/calendar';

// Register calendar routes
app.use('/api/calendar', calendarRoutes);
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¨ EXAMPLE .ICS FILE OUTPUT

For the tasks shown in the screenshot:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

```ics
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//UpKeepQR//Home Maintenance Tasks//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:UpKeepQR - My Tester
X-WR-TIMEZONE:America/New_York
X-WR-CALDESC:Home maintenance tasks for My Tester

BEGIN:VEVENT
UID:task-1@upkeepqr.com
DTSTAMP:20260127T120000Z
DTSTART;VALUE=DATE:20260223
DTEND;VALUE=DATE:20260223
SUMMARY:Test smoke alarms
DESCRIPTION:Press and hold the test button until alarm sounds.\n\nPriority: High\n\nCategory: Safety\n\nFrom UpKeepQR
PRIORITY:1
CATEGORIES:Safety,Home Maintenance
STATUS:NEEDS-ACTION
CLASS:PUBLIC
TRANSP:TRANSPARENT
LOCATION:My Tester
BEGIN:VALARM
TRIGGER:-P1D
DESCRIPTION:Reminder: Test smoke alarms is due tomorrow
ACTION:DISPLAY
END:VALARM
BEGIN:VALARM
TRIGGER:-P7D
DESCRIPTION:Reminder: Test smoke alarms is due in 1 week
ACTION:DISPLAY
END:VALARM
END:VEVENT

BEGIN:VEVENT
UID:task-2@upkeepqr.com
DTSTAMP:20260127T120000Z
DTSTART;VALUE=DATE:20260223
DTEND;VALUE=DATE:20260223
SUMMARY:Test carbon monoxide detectors
DESCRIPTION:Press test button; confirm alarm; replace unit if no response.\n\nPriority: High\n\nCategory: Safety\n\nFrom UpKeepQR
PRIORITY:1
CATEGORIES:Safety,Home Maintenance
STATUS:NEEDS-ACTION
CLASS:PUBLIC
TRANSP:TRANSPARENT
LOCATION:My Tester
BEGIN:VALARM
TRIGGER:-P1D
DESCRIPTION:Reminder: Test carbon monoxide detectors is due tomorrow
ACTION:DISPLAY
END:VALARM
END:VEVENT

BEGIN:VEVENT
UID:task-3@upkeepqr.com
DTSTAMP:20260127T120000Z
DTSTART;VALUE=DATE:20260223
DTEND;VALUE=DATE:20260223
SUMMARY:Test garage door auto-reverse
DESCRIPTION:Place a 2Ã—4 on floor under door; close door-it should reverse on contact.\n\nPriority: High\n\nCategory: Safety\n\nFrom UpKeepQR
PRIORITY:1
CATEGORIES:Safety,Home Maintenance
STATUS:NEEDS-ACTION
CLASS:PUBLIC
TRANSP:TRANSPARENT
LOCATION:My Tester
BEGIN:VALARM
TRIGGER:-P1D
DESCRIPTION:Reminder: Test garage door auto-reverse is due tomorrow
ACTION:DISPLAY
END:VALARM
END:VEVENT

END:VCALENDAR
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… FEATURES INCLUDED

Calendar Event Details:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Task title as event summary
âœ… Task description with instructions
âœ… Due date as event date
âœ… Priority level (High/Medium/Low)
âœ… Category (Safety, Maintenance, etc.)
âœ… Status (Needs Action for pending tasks)
âœ… Location (Household name)

Reminders:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 1 day before due date
âœ… 7 days before due date (1 week notice)

Calendar Compatibility:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Google Calendar
âœ… Apple Calendar (macOS/iOS)
âœ… Microsoft Outlook
âœ… Yahoo Calendar
âœ… Any calendar app supporting .ics format

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª TESTING CHECKLIST

Functional Testing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Click "Sync Calendar" button
â–¡ .ics file downloads âœ“
â–¡ File name correct (UpKeepQR_Tasks_My_Tester.ics) âœ“
â–¡ Open .ics file
â–¡ Calendar app launches âœ“
â–¡ Import dialog appears âœ“
â–¡ Click "Import" or "Add to Calendar"
â–¡ All tasks appear in calendar âœ“
â–¡ Tasks show correct dates âœ“
â–¡ Task descriptions visible âœ“
â–¡ Reminders set (1 day, 7 days before) âœ“
â–¡ Priority levels correct âœ“

Edge Cases:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ No pending tasks (show message)
â–¡ All tasks completed (show message)
â–¡ Special characters in task names (escaped correctly)
â–¡ Very long task descriptions (formatted correctly)
â–¡ Tasks without descriptions (handled gracefully)
â–¡ Multiple households (correct tasks for each)

Calendar App Testing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Google Calendar (web)
â–¡ Google Calendar (mobile)
â–¡ Apple Calendar (Mac)
â–¡ Apple Calendar (iPhone)
â–¡ Microsoft Outlook (desktop)
â–¡ Microsoft Outlook (web)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ USER EXPERIENCE

User Flow:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Step 1: View Tasks
User: Opens household details
User: Clicks "Tasks" tab
User: Sees 3 pending tasks

Step 2: Sync Calendar
User: Clicks "Sync Calendar" button
System: Generates .ics file
System: Downloads file automatically
User: Sees success message "Calendar file downloaded!"

Step 3: Import to Calendar
User: Opens downloaded .ics file
Calendar App: Shows import dialog
Calendar App: Lists 3 tasks to import
User: Clicks "Import" or "Add to Calendar"
Calendar App: Tasks added successfully

Step 4: View in Calendar
User: Opens their calendar app
User: Sees all 3 tasks with reminders
User: Receives notification 7 days before
User: Receives notification 1 day before
User: Completes task, marks as done

Benefits for Homeowner:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Never miss important maintenance
âœ… Automatic reminders in their preferred app
âœ… All tasks in one place (calendar + email + UpKeepQR)
âœ… Can view tasks offline
âœ… Syncs across all devices
âœ… No need to check UpKeepQR daily
âœ… Better home maintenance compliance

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ IMPLEMENTATION CHECKLIST

Backend:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Create server/routes/calendar.ts
â–¡ Implement GET /api/calendar/household/:id/tasks.ics
â–¡ Add helper functions (formatICSDate, escapeICS, etc.)
â–¡ Query tasks from database
â–¡ Generate .ics file content
â–¡ Set correct headers for download
â–¡ Handle errors gracefully
â–¡ Register route in server/index.ts

Frontend:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Update HouseholdDetailsModal component
â–¡ Add handleSyncCalendar function
â–¡ Add loading state (isSyncing)
â–¡ Add success state (syncSuccess)
â–¡ Trigger file download
â–¡ Show success message
â–¡ Handle errors with user-friendly message

Testing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Test with 1 task
â–¡ Test with multiple tasks
â–¡ Test with no tasks
â–¡ Test with completed tasks only
â–¡ Test file download
â–¡ Test import to Google Calendar
â–¡ Test import to Apple Calendar
â–¡ Test import to Outlook
â–¡ Test reminders work
â–¡ Test on mobile devices

Documentation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Add user guide: "How to sync tasks to calendar"
â–¡ Add help text near button
â–¡ Add tooltip explaining feature
â–¡ Update FAQ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ DEPLOYMENT STEPS

1. Implement backend endpoint
2. Implement frontend button handler
3. Test locally with sample tasks
4. Import to multiple calendar apps
5. Verify reminders work
6. Commit and push to GitHub
7. Deploy to production
8. Test on production with real household
9. Monitor for errors
10. Collect user feedback

Commit Message:
```
feat: Add calendar sync for homeowner maintenance tasks

- Implemented .ics file generation for household tasks
- Added "Sync Calendar" button to household details modal
- Calendar events include task details, due dates, and reminders
- Supports Google Calendar, Outlook, Apple Calendar, and others
- Users receive reminders 1 day and 7 days before due date
- Works offline once imported to calendar

Fixes calendar sync 500 error
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… SUMMARY

Feature: Calendar Sync for Homeowner Tasks
Approach: .ics file download (simple, universal)
Benefit: Homeowners get reminders in their preferred calendar app

Implementation:
âœ… Backend: Generate .ics file from tasks
âœ… Frontend: Download .ics file on button click
âœ… Universal: Works with all calendar apps
âœ… Simple: No OAuth or API setup needed
âœ… Privacy-friendly: No account connection required

Next Steps:
1. Implement the backend endpoint shown above
2. Update the frontend button handler
3. Test with your household tasks
4. Deploy and verify

This will fix the 500 error and provide a working calendar sync! ğŸŠ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

END OF SPECIFICATION