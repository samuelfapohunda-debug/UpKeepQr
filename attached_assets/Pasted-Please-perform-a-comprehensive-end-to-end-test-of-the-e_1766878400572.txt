Please perform a comprehensive end-to-end test of the entire UpKeepQR system. Test every workflow, notification, database operation, and user journey from start to finish. Document all results with screenshots, logs, and detailed findings.

# TESTING REQUIREMENTS

## 1. ENVIRONMENT SETUP
- Use the development database (not production)
- Create test data with realistic scenarios
- Document all test user credentials
- Capture all console logs, errors, and warnings
- Take screenshots at each major step

## 2. TEST SCENARIOS TO EXECUTE

### A. ONBOARDING WORKFLOW (New Homeowner Journey)
**Test Case 1: Complete Single-Family Home Setup**
- Navigate to setup form
- Fill out ALL fields with test data:
  * Name: "Test User - Single Family"
  * Email: "test-single@example.com"
  * Phone: "+1234567890"
  * Address: "123 Test St, Atlanta, GA 30301"
  * Home Type: Single Family
  * Square Footage: 2500
  * Year Built: 2010
  * HVAC Type: Central Air
  * Water Heater Type: Tank (Gas)
  * Roof Age: 5 years
  * Has Gutters: Yes
  * Has Deck: Yes
- Submit form and verify:
  * ✅ Household created in database
  * ✅ Tasks generated (should be ~32 tasks for single family)
  * ✅ Tasks have correct due dates
  * ✅ Tasks have correct priorities
  * ✅ Reminders created in reminder_queue (check for 7, 3, 1, 0 day reminders)
  * ✅ No errors in console
- Document:
  * Total tasks created
  * Sample of tasks with due dates
  * Reminder queue entries
  * Any errors or warnings

**Test Case 2: Condo Setup (Fewer Tasks Expected)**
- Create another household:
  * Name: "Test User - Condo"
  * Email: "test-condo@example.com"
  * Home Type: Condo
  * HVAC Type: Central Air
  * Water Heater Type: Tankless
  * No gutters, no deck
- Verify:
  * ✅ Fewer tasks created (no exterior tasks)
  * ✅ No gutter cleaning task
  * ✅ No deck maintenance task
  * ✅ No tankless water heater flush task
- Document task differences vs single family

**Test Case 3: Home with No HVAC**
- Create household:
  * Name: "Test User - No HVAC"
  * HVAC Type: None
- Verify:
  * ✅ No HVAC-related tasks created
- Document excluded tasks

### B. TASK GENERATION ENGINE
**Verify for each test household:**
- Query database:
```sql
SELECT 
  h.name as household_name,
  COUNT(hta.id) as total_tasks,
  COUNT(CASE WHEN hta.priority = 'high' THEN 1 END) as high_priority,
  COUNT(CASE WHEN hta.priority = 'medium' THEN 1 END) as medium_priority,
  COUNT(CASE WHEN hta.priority = 'low' THEN 1 END) as low_priority
FROM households h
LEFT JOIN household_task_assignments hta ON h.id = hta.household_id
WHERE h.email LIKE 'test-%@example.com'
GROUP BY h.id, h.name;
```
- Document results in a table
- Verify task filtering logic works correctly

### C. REMINDER QUEUE SYSTEM
**Test Reminder Creation:**
- Query reminder_queue for test households:
```sql
SELECT 
  h.name,
  hta.due_date,
  hmt.task_name,
  rq.run_at,
  rq.days_before,
  rq.status,
  rq.reminder_type
FROM reminder_queue rq
JOIN household_task_assignments hta ON rq.task_assignment_id = hta.id
JOIN households h ON rq.household_id = h.id
JOIN home_maintenance_tasks hmt ON hta.task_id = hmt.id
WHERE h.email LIKE 'test-%@example.com'
ORDER BY rq.run_at;
```
- Verify:
  * ✅ High priority tasks have 4 reminders (7, 3, 1, 0 days before)
  * ✅ Medium priority tasks have 3 reminders (7, 1, 0 days before)
  * ✅ Low priority tasks have 2 reminders (3, 0 days before)
  * ✅ All reminders have status = 'pending'
  * ✅ run_at dates are calculated correctly
- Document sample reminders

### D. CRON JOB TESTING

**Test Manual Trigger of Reminder Processing:**
```bash
# In Replit shell, trigger the reminder processor manually
curl -X POST http://localhost:5000/api/admin/reminders/trigger
```
OR if that endpoint doesn't exist, call the function directly in Node:
```javascript
// In Replit console or create test script
import { processReminderQueue } from './server/lib/cron';
await processReminderQueue();
```

**Verify:**
- Check console logs for:
  * ✅ "Processing reminder queue" message
  * ✅ Number of reminders found
  * ✅ Email sending attempts
  * ✅ SMS sending attempts (if applicable)
  * ✅ Reminder status updates
- Check database after processing:
```sql
SELECT status, COUNT(*) 
FROM reminder_queue 
WHERE household_id IN (
  SELECT id FROM households WHERE email LIKE 'test-%@example.com'
)
GROUP BY status;
```
- Document which reminders were sent vs pending

**Test Overdue Task Detection:**
- Manually create an overdue task:
```sql
UPDATE household_task_assignments 
SET due_date = NOW() - INTERVAL '5 days',
    status = 'pending'
WHERE household_id = (SELECT id FROM households WHERE email = 'test-single@example.com' LIMIT 1)
LIMIT 1;
```
- Run overdue check (if separate function exists)
- Verify task status changes to 'overdue'

### E. MAINTENANCE LOGGING

**Test Case 1: Log Scheduled Task Completion**
- Navigate to Tasks tab in household modal
- Select a pending task
- Click "Mark Complete"
- Fill out maintenance log form:
  * Date: Today
  * Task Performed: "Changed HVAC filter"
  * Type: Scheduled
  * Cost: 25.99
  * Service Provider: "DIY"
  * Parts: "MERV-13 16x20 filter"
  * Notes: "Filter was very dirty"
- Submit and verify:
  * ✅ Maintenance log created
  * ✅ Task status changed to 'completed'
  * ✅ Pending reminders cancelled
  * ✅ wasOnTime field calculated correctly
  * ✅ daysLate field calculated if late
- Query database:
```sql
SELECT * FROM maintenance_logs 
WHERE household_id = (SELECT id FROM households WHERE email = 'test-single@example.com' LIMIT 1)
ORDER BY created_at DESC LIMIT 1;
```

**Test Case 2: Log Manual Maintenance**
- Create maintenance log NOT tied to scheduled task
- Fill form:
  * Task: "Fixed leaky faucet"
  * Type: Manual
  * Cost: 0 (DIY)
- Verify log created independently

**Test Case 3: Log Emergency Repair**
- Create maintenance log:
  * Task: "Furnace stopped working - emergency repair"
  * Type: Emergency
  * Cost: 450
  * Provider: "ABC HVAC Emergency"
- Verify log created with correct type

### F. APPLIANCE TRACKING

**Test Case 1: Add Appliance with Warranty**
- Navigate to Appliances tab
- Add new appliance:
  * Type: Refrigerator
  * Brand: Samsung
  * Model: RF28R7351SR
  * Serial: ABC123456
  * Purchase Date: 6 months ago
  * Warranty Expiration: 6 months from now (within 14-day alert window for testing)
  * Warranty Provider: "Best Buy"
- Verify appliance saved

**Test Case 2: Warranty Expiration Alert**
- Create appliance with warranty expiring in 10 days:
```sql
INSERT INTO household_appliances (
  id, household_id, appliance_type, brand, model_number,
  purchase_date, warranty_expiration, warranty_provider, is_active
) VALUES (
  gen_random_uuid(),
  (SELECT id FROM households WHERE email = 'test-single@example.com' LIMIT 1),
  'Water Heater',
  'Rheem',
  'RTG-84XLP',
  NOW() - INTERVAL '335 days',
  NOW() + INTERVAL '10 days',
  'Home Depot Extended',
  true
);
```
- Manually trigger warranty check cron:
```javascript
import { checkWarrantyExpirations } from './server/lib/cron';
await checkWarrantyExpirations();
```
- Verify:
  * ✅ Console shows warranty found
  * ✅ Email would be sent (check logs)
  * ✅ Days remaining calculated correctly

### G. ADMIN DASHBOARD

**Test Household Management:**
- Navigate to /admin/setup-forms
- Test filters:
  * ✅ Search by name works
  * ✅ Filter by status works
  * ✅ Filter by city/state/zip works
  * ✅ Date range filters work
- Test sorting:
  * ✅ Sort by name works
  * ✅ Sort by completion date works
- Test pagination:
  * ✅ Next/previous page works
  * ✅ Page size selector works
- Click on a household row
- Verify 4-tab modal opens:
  * ✅ Details tab shows contact info
  * ✅ Notes tab shows/creates notes
  * ✅ Appliances tab shows appliances
  * ✅ Tasks tab shows task list
- Test each tab's functionality

### H. API ENDPOINT TESTING

**Use curl or Postman to test:**
```bash
# Get household tasks
curl http://localhost:5000/api/households/{household-id}/tasks

# Create maintenance log
curl -X POST http://localhost:5000/api/households/{household-id}/maintenance-logs \
  -H "Content-Type: application/json" \
  -d '{
    "maintenanceDate": "2024-12-27",
    "taskPerformed": "Test task",
    "logType": "manual",
    "cost": 50
  }'

# Get maintenance logs with filters
curl "http://localhost:5000/api/households/{household-id}/maintenance-logs?start_date=2024-01-01&log_type=scheduled"

# Get warranty status report
curl http://localhost:5000/api/households/{household-id}/reports/warranty-status

# Get maintenance history report
curl http://localhost:5000/api/households/{household-id}/reports/maintenance-history
```

Document all responses, status codes, errors

### I. EMAIL/SMS NOTIFICATION TESTING

**Note:** Don't actually send to real emails/phones
- Check if SendGrid/Twilio are in test/sandbox mode
- Review email template generation:
  * Task reminder emails
  * Overdue task emails
  * Warranty expiration emails
- Review SMS template generation
- Check ICS calendar file generation
- Verify no emails sent to production addresses

### J. DATABASE INTEGRITY

**Run integrity checks:**
```sql
-- Check for orphaned records
SELECT 'Orphaned task assignments' as check_type, COUNT(*) as count
FROM household_task_assignments hta
LEFT JOIN households h ON hta.household_id = h.id
WHERE h.id IS NULL
UNION ALL
SELECT 'Orphaned reminders', COUNT(*)
FROM reminder_queue rq
LEFT JOIN household_task_assignments hta ON rq.task_assignment_id = hta.id
WHERE hta.id IS NULL
UNION ALL
SELECT 'Orphaned maintenance logs', COUNT(*)
FROM maintenance_logs ml
LEFT JOIN households h ON ml.household_id = h.id
WHERE h.id IS NULL;

-- Check for tasks without reminders (high priority should have 4)
SELECT h.name, hmt.task_name, hta.priority, COUNT(rq.id) as reminder_count
FROM household_task_assignments hta
JOIN households h ON hta.household_id = h.id
JOIN home_maintenance_tasks hmt ON hta.task_id = hmt.id
LEFT JOIN reminder_queue rq ON hta.id = rq.task_assignment_id
WHERE hta.status = 'pending'
GROUP BY h.id, h.name, hmt.task_name, hta.priority
HAVING (hta.priority = 'high' AND COUNT(rq.id) != 4)
    OR (hta.priority = 'medium' AND COUNT(rq.id) != 3)
    OR (hta.priority = 'low' AND COUNT(rq.id) != 2);
```

### K. ERROR HANDLING

**Test edge cases:**
- Submit onboarding form with missing required fields
- Try to complete task with future date
- Try to add appliance with invalid data
- Try to access household that doesn't exist
- Try to create duplicate appliance serial number
- Submit maintenance log with negative cost

Document all error messages and handling

### L. PERFORMANCE TESTING

**Check query performance:**
```sql
EXPLAIN ANALYZE
SELECT * FROM household_task_assignments
WHERE household_id = 'test-id'
AND status = 'pending'
AND due_date <= CURRENT_DATE + INTERVAL '7 days';
```

Verify indexes are being used

## 3. DELIVERABLES

Please provide a comprehensive test report with:

### Summary Table:
| Test Category | Tests Run | Passed | Failed | Notes |
|---------------|-----------|--------|--------|-------|
| Onboarding    | 3         | ?      | ?      | ...   |
| Task Gen      | 3         | ?      | ?      | ...   |
| Reminders     | 5         | ?      | ?      | ...   |
| ... etc       |           |        |        |       |

### Detailed Findings:
- Screenshots of each workflow
- Database query results
- Console logs (errors and warnings)
- Any bugs discovered
- Performance issues identified
- Recommendations for fixes

### Test Data Created:
- List all test households created
- List all test appliances
- List all test maintenance logs

### Critical Issues Found:
- Priority 1 (blocking): [list]
- Priority 2 (important): [list]
- Priority 3 (nice to have): [list]

### Success Metrics:
- Total tasks generated correctly: X/Y
- Reminders created correctly: X/Y
- Database integrity: Pass/Fail
- API endpoints working: X/Y
- UI workflows functional: X/Y

## 4. CLEANUP

After testing, document how to:
- Remove all test data
- Reset database to clean state
- OR keep test data for future reference

---

IMPORTANT: Be thorough. Test every workflow end-to-end. Document everything. If something fails, capture the exact error, screenshot, and database state.

Begin testing now and provide detailed results.