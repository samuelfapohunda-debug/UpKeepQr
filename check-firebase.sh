#!/bin/bash

echo "========================================="
echo "üî• FIREBASE USAGE AUDIT"
echo "========================================="
echo ""

echo "1Ô∏è‚É£ Package Dependencies:"
echo "Root package.json:"
grep -i firebase package.json 2>/dev/null || echo "  ‚úÖ No Firebase in root"
echo ""
echo "Client package.json:"
grep -i firebase client/package.json 2>/dev/null || echo "  ‚úÖ No Firebase in client"
echo ""
echo "Server package.json:"
grep -i firebase server/package.json 2>/dev/null || echo "  ‚úÖ No Firebase in server"

echo ""
echo "2Ô∏è‚É£ Configuration Files:"
ls -la firebase.json .firebaserc firestore.rules firestore.indexes.json 2>/dev/null || echo "  ‚úÖ No Firebase config files"

echo ""
echo "3Ô∏è‚É£ Code References:"
echo "Client code:"
find client/src -name "*.ts" -o -name "*.tsx" 2>/dev/null | xargs grep -l "firebase" 2>/dev/null || echo "  ‚úÖ No Firebase imports"
echo ""
echo "Server code:"
find server -name "*.ts" -o -name "*.js" 2>/dev/null | xargs grep -l "firebase" 2>/dev/null || echo "  ‚úÖ No Firebase imports"

echo ""
echo "4Ô∏è‚É£ Environment Variables:"
echo "Checking for Firebase env vars..."
grep -i firebase .env* 2>/dev/null || echo "  ‚úÖ No Firebase env vars in local .env files"

echo ""
echo "5Ô∏è‚É£ Database Check:"
echo "Current database configuration:"
grep -h "DATABASE\|POSTGRES\|DB_" .env* 2>/dev/null | head -5 || echo "  (Check Render dashboard for DATABASE_URL)"

echo ""
echo "6Ô∏è‚É£ Quick grep for 'firebase' anywhere:"
grep -r "firebase" . --include="*.json" --include="*.ts" --include="*.tsx" --include="*.js" --max-count=3 2>/dev/null || echo "  ‚úÖ No 'firebase' found in codebase"

echo ""
echo "========================================="
echo "SUMMARY"
echo "========================================="
echo "Your infrastructure based on our work:"
echo "  ‚úÖ Hosting: Render (srv-d4jtmm49c44c73eioqc0)"
echo "  ‚úÖ Database: PostgreSQL on Render"
echo "  ‚úÖ Frontend: React + TypeScript + Vite"
echo "  ‚úÖ Backend: Node.js + Express"
echo "  ‚úÖ CDN/DNS: Cloudflare (proxying traffic)"
echo "  ‚úÖ APIs: Stripe, SendGrid, Twilio, Google Places"
echo ""
echo "Firebase status will be shown above ‚òùÔ∏è"
echo "========================================="
